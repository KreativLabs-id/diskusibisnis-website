# Railway Environment Variables Template
# Copy-paste this to Railway Dashboard > Service > Variables

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Node environment - MUST be 'production' for Railway
NODE_ENV=production

# Port - Railway will auto-assign, use this exact value
PORT=${{PORT}}

# =============================================================================
# DATABASE CONFIGURATION (Supabase)
# =============================================================================

# Get this from: Supabase Dashboard > Project Settings > Database > Connection String
# Use "Connection Pooling" with port 6543 (NOT direct connection port 5432)
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql://postgres.YOUR_PROJECT_REF:YOUR_PASSWORD@aws-0-REGION.pooler.supabase.com:6543/postgres

# =============================================================================
# JWT (Authentication)
# =============================================================================

# Generate secure secret with: npm run generate-secret
# MUST be at least 32 characters, use random hex string
# NEVER use default/example values in production!
JWT_SECRET=REPLACE_WITH_OUTPUT_FROM_npm_run_generate-secret

# Token expiration time (7 days default)
JWT_EXPIRES_IN=7d

# =============================================================================
# CORS (Cross-Origin Resource Sharing)
# =============================================================================

# Your frontend production URL
# Example: https://diskusi-bisnis.vercel.app
# For multiple domains: https://domain1.com,https://domain2.com
CORS_ORIGIN=https://YOUR_FRONTEND_DOMAIN.vercel.app

# =============================================================================
# RATE LIMITING (DDoS Protection)
# =============================================================================

# Time window in milliseconds (900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per IP per window (100 = reasonable for API)
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================

# Get these from: Supabase Dashboard > Project Settings > API

# Your Supabase project URL
# Format: https://[YOUR_PROJECT_REF].supabase.co
SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co

# Supabase anonymous/public key (safe to expose in frontend)
SUPABASE_ANON_KEY=YOUR_ANON_KEY_HERE

# Supabase service role key (KEEP SECRET! Server-side only)
# This has admin privileges, never expose to frontend
SUPABASE_SERVICE_ROLE_KEY=YOUR_SERVICE_ROLE_KEY_HERE

# =============================================================================
# NOTES
# =============================================================================

# 1. Replace ALL placeholder values (YOUR_*, REPLACE_WITH_*)
# 2. Generate JWT_SECRET with: npm run generate-secret
# 3. Get DATABASE_URL from Supabase (use Connection Pooling!)
# 4. NEVER commit this file with real values to git
# 5. Each environment (dev/staging/prod) should have different secrets
# 6. Store backup of production secrets in secure password manager

# =============================================================================
# OPTIONAL: Additional Configuration (if needed)
# =============================================================================

# If you add more features, add environment variables here:

# Email service (if implementing email notifications)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# Redis (if implementing caching)
# REDIS_URL=redis://default:password@host:port

# AWS S3 (if implementing file uploads)
# AWS_ACCESS_KEY_ID=your-key
# AWS_SECRET_ACCESS_KEY=your-secret
# AWS_S3_BUCKET=your-bucket

# Sentry (if implementing error tracking)
# SENTRY_DSN=your-sentry-dsn

# =============================================================================
# VERIFICATION CHECKLIST
# =============================================================================

# Before deploying, verify:
# [ ] All values replaced (no YOUR_*, REPLACE_WITH_* remaining)
# [ ] DATABASE_URL uses connection pooling (port 6543)
# [ ] JWT_SECRET is secure random string (32+ chars)
# [ ] CORS_ORIGIN matches frontend production URL
# [ ] SUPABASE_URL, ANON_KEY, SERVICE_ROLE_KEY are correct
# [ ] NODE_ENV is 'production'
# [ ] PORT is '${{PORT}}' (Railway variable, not hardcoded)
