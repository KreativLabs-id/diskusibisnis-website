# ===========================================
# BACKEND ENVIRONMENT VARIABLES
# ===========================================
# SECURITY WARNING: Never commit .env files to git!
# Copy this file to .env and fill in your values.
# ===========================================

# Server Configuration
PORT=5000
NODE_ENV=development

# ===========================================
# DATABASE (NEVER use NEXT_PUBLIC_ prefix!)
# ===========================================
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
# Get this from: Supabase Dashboard > Project Settings > Database > Connection String
DATABASE_URL=postgresql://postgres.[YOUR-PROJECT-REF]:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres

# Database SSL Configuration
# IMPORTANT: Set to true in production for security!
DB_SSL_REJECT_UNAUTHORIZED=false

# ===========================================
# JWT AUTHENTICATION (NEVER use NEXT_PUBLIC_ prefix!)
# ===========================================
# Generate a strong secret key (minimum 32 characters):
# Run: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-minimum-32-characters
JWT_EXPIRES_IN=7d

# ===========================================
# CORS Configuration
# ===========================================
# In production, list all allowed origins separated by commas
# NEVER use * in production!
# Example: https://yourdomain.com,https://www.yourdomain.com
CORS_ORIGIN=http://localhost:3000

# ===========================================
# RATE LIMITING
# ===========================================
# Window in milliseconds (900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# REDIS (Required for production!)
# ===========================================
# For distributed rate limiting and OTP storage
# Format: redis://username:password@host:port or rediss://... for TLS
# If not provided, uses in-memory storage (NOT recommended for production)
REDIS_URL=

# ===========================================
# SUPABASE (Optional - if using Supabase features)
# ===========================================
# Get these from: Supabase Dashboard > Project Settings > API
SUPABASE_URL=https://[YOUR-PROJECT-REF].supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
# IMPORTANT: Never expose SERVICE_ROLE_KEY to client!
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ===========================================
# GOOGLE OAUTH
# ===========================================
# Get from: Google Cloud Console > APIs & Services > Credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com

# ===========================================
# SECURITY CHECKLIST (for production)
# ===========================================
# [ ] Change NODE_ENV to 'production'
# [ ] Generate strong JWT_SECRET (32+ random chars)
# [ ] Set DB_SSL_REJECT_UNAUTHORIZED=true
# [ ] Configure specific CORS_ORIGIN (no wildcards)
# [ ] Set up REDIS_URL for distributed rate limiting
# [ ] Verify no secrets have NEXT_PUBLIC_ prefix
# [ ] Enable HTTPS only
